# 需求文档

## 介绍

莲花岛(Lotus Island)是一个儿童好习惯培养的积分系统，通过游戏化的方式激励儿童养成良好习惯。系统包含用户管理、背包系统、活动广场等核心功能，使用React前端框架，支持移动端浏览，后端使用Postgres数据库，可部署到Vercel平台。

## 需求

### 需求 1 - 用户认证与管理

**用户故事:** 作为系统管理员，我希望能够管理用户账户，以便控制系统访问权限和用户数据。

#### 验收标准

1. 当系统初始化时，系统应创建一个默认管理员账户(用户名: admin, 密码: Password@123)
2. 当用户输入正确的用户名和密码时，系统应允许用户登录
3. 当管理员登录时，系统应提供用户管理功能(增加、修改、删除普通用户)
4. 当普通用户登录时，系统应只显示用户功能界面
5. 系统不应提供用户注册功能

### 需求 2 - 用户背包系统

**用户故事:** 作为用户，我希望拥有一个背包来存储和管理我获得的物品，以便查看和使用这些物品。

#### 验收标准

1. 当新用户创建时，系统应自动为用户分配10个莲子物品
2. 当用户打开背包时，系统应显示所有物品的图标和对应数量
3. 当物品配置为"可使用"时，用户应能够点击选择该物品
4. 当用户点击可使用物品时，系统应增加该物品的选择数量
5. 当用户只选择一种物品时，系统应启用"使用"按钮
6. 当用户选择两种或以上物品时，系统应禁用"使用"按钮
7. 当用户确认使用物品时，系统应减少相应物品的数量
8. 当用户使用物品后，系统应记录使用历史并允许查询

### 需求 3 - 每日签到功能

**用户故事:** 作为用户，我希望能够每日签到获得奖励，以便持续参与系统活动。

#### 验收标准

1. 当用户进入每日签到页面时，系统应检查当日是否已签到
2. 当用户当日未签到时，系统应显示可签到状态
3. 当用户点击签到时，系统应给用户增加5个莲子(默认配置)
4. 当用户当日已签到时，系统应显示已签到状态并禁用签到功能
5. 当日期变更时，系统应重置用户的签到状态

### 需求 4 - 物品兑换功能

**用户故事:** 作为用户，我希望能够用莲子兑换其他物品，以便获得更多有用的奖励。

#### 验收标准

1. 当用户进入物品兑换页面时，系统应显示所有可兑换的物品及兑换比例
2. 当用户选择兑换物品时，系统应检查用户是否有足够的莲子
3. 当用户莲子数量足够时，系统应允许兑换并扣除相应莲子，增加目标物品
4. 当用户莲子数量不足时，系统应显示错误提示
5. 系统应支持配置"10个莲子兑换1个20分钟电视券"的默认兑换规则
6. 兑换获得的物品应标记为可使用/消耗

### 需求 5 - 活动广场扩展性

**用户故事:** 作为系统管理员，我希望系统具有良好的扩展性，以便将来添加更多活动和游戏。

#### 验收标准

1. 当系统设计时，数据库结构应支持灵活的活动配置
2. 当添加新活动时，系统应能够无需修改核心代码即可支持
3. 当配置活动参数时，系统应提供灵活的配置选项
4. 活动广场应支持动态显示已配置的活动列表

### 需求 6 - 移动端适配与部署

**用户故事:** 作为用户，我希望能够在手机上流畅使用系统，并且系统能够稳定运行。

#### 验收标准

1. 当用户在移动设备上访问时，界面应自适应屏幕尺寸
2. 当用户进行触摸操作时，系统应提供良好的交互体验
3. 系统应能够成功部署到Vercel平台
4. 系统应能够连接到指定的Postgres数据库(aws-1-us-west-1.pooler.supabase.com)
5. 数据库连接应支持SSL模式配置(require或prefer)

### 需求 7 - 数据持久化

**用户故事:** 作为系统，我需要可靠地存储用户数据，以便保证数据的完整性和一致性。

#### 验收标准

1. 当用户数据发生变化时，系统应立即同步到Postgres数据库
2. 当系统重启时，所有用户数据应能够正确恢复
3. 当数据库连接异常时，系统应提供适当的错误处理
4. 系统应使用提供的数据库连接参数进行连接
5. 数据库表结构应支持用户、物品、活动等核心实体的存储